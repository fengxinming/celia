!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).celia=t()}(this,function(){"use strict";function c(e){return null==e}function u(e,t){return t?e.bind(t):e}function s(e,t){return t?new Date(Date.UTC(e[0],e[1]||0,c(e[2])?1:e[2],e[3]||0,e[4]||0,e[5]||0,e[6]||0)):new Date(e[0],e[1]||0,c(e[2])?1:e[2],e[3]||0,e[4]||0,e[5]||0,e[6]||0)}function a(e){return"string"==typeof e}var i="years",o="months",f="days",l="hours",g="minutes",m="seconds",h="milliseconds",Y=(new Date).getTimezoneOffset(),t={},e=function(e){t[e]=t[e.slice(0,-1)]=t[e.slice(0,1)]=e};function M(e){return a(e)?t[e]:void 0}e(h),e(i),e(o),e("dates"),e(f),e(l),e(g),e(m),t.M=o,t.ms=h;var n={};function S(e){return e=e?M(e):h,n[e]}function d(e,t,n){var r,d=[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()];if(c(r=t)||"object"!=typeof r){var a=S(n);d[a]+=t}else!function(e,t,n){var r=u(t,n);for(var d in e)if(!1===r(e[d],d,e))break}(t,function(e,t){var n=S(t);d[n]+=e});return e.setTime(+s(d)),e}function v(e){return new Date(+e)}function r(e){var t=e.getFullYear();return t%4==0&&t%100!=0||t%400==0}n[i]=0,n[o]=1,n[f]=2,n[l]=3,n[g]=4,n[m]=5,n[h]=6;var H=[31,28,31,30,31,30,31,31,30,31,30,31],D=[31,29,31,30,31,30,31,31,30,31,30,31];function b(e){return r(e)?D:H}function p(e,t,n){for(var r=u(t,n),d=0,a=void 0;!1!==a&&d<e;d++)a=r(d,d,d)}function w(e){return void 0===e}var y=/^\/?Date\((-?\d+)/i,k=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)\s*([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,O=[["YYYY-MM-DD",/(\d{4})-(\d\d)-(\d\d)/],["YYYY-MM",/(\d{4})-(\d\d)/,!1],["YYYYMMDD",/(\d{4})(\d\d)(\d\d)/],["YYYYMM",/(\d{4})(\d\d)/,!1],["YYYY",/\d{4}/,!1]],x=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)\s*([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,T=/\[.*?\]|Y{2,4}|y{2,4}|M{1,2}|D{1,2}|d{1,2}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|SSS|Z{1,2}/g,Z=[["HH:mm:ss.SSSS",/(\d\d):(\d\d):(\d\d)\.(\d+)/],["HH:mm:ss,SSSS",/(\d\d):(\d\d):(\d\d),(\d+)/],["HH:mm:ss",/(\d\d):(\d\d):(\d\d)/],["HH:mm",/(\d\d):(\d\d)/],["HHmmss.SSSS",/(\d\d)(\d\d)(\d\d)\.(\d+)/],["HHmmss,SSSS",/(\d\d)(\d\d)(\d\d),(\d+)/],["HHmmss",/(\d\d)(\d\d)(\d\d)/],["HHmm",/(\d\d)(\d\d)/],["HH",/\d\d/]],A=/(Z)|[+-](\d\d)(?::?(\d\d))?/;function I(e,t,n){for(var r=u(t,n),d=0,a=e.length,s=void 0;!1!==s&&d<a;d++)s=r(e[d],d,e)}var F=Object.prototype.toString;function j(e){return"[object Date]"===(t=e,F.call(t));var t}function C(e,t,n){if(!a(e))return s(e,!0===t);if(a(t))return s(function(n,r){var e,t=r.length,d=[],a=!1;if(p(t,function(e){var t=n.charAt(e);switch(r.charAt(e)){case"Y":case"y":d[0]=(d[0]||"")+t;break;case"M":d[1]=(d[1]||"")+t;break;case"D":case"d":d[2]=(d[2]||"")+t;break;case"H":case"h":d[3]=(d[3]||"")+t;break;case"m":d[4]=(d[4]||"")+t;break;case"s":d[5]=(d[5]||"")+t;break;case"S":d[6]=(d[6]||"")+t;break;case"Z":a=!0}}),d=d.map(function(e){return parseInt(e,10)}),a)if(e=A.exec(n.slice(-1<r.indexOf("ZZ")?-5:-6))){var s=Y;if(!e[1]){var u="+"===e[0].charAt(0)?1:-1;d[3]-=e[2]*u,d[4]-=(e[3]||0)*u}d[4]-=s}else d.isUTC=a&-1<n.indexOf("Z");return c(d[1])||(d[1]-=1),d}(e,t),n);var r=function(e){var n,r,d=[],a=x.exec(e)||k.exec(e);if(a){if(I(O,function(e,t){if(r=e[1].exec(a[1]))return p(3,function(e){d[e]=parseInt(r[e+1]||1,10)}),d[1]-=1,n=!1!==e[2],!1}),e.indexOf(d[0]))return e;if(r=null,a[3]&&I(Z,function(e){if(r=e[1].exec(a[3]))return d=d.concat(r.slice(1).map(function(e){return parseInt(e,10)})),!1}),!n&&r)return d;if(r=null,a[4]){r=A.exec(a[4]);var t=Y;r[1]||(d[3]-=r[2],d[4]-=r[3]||0),d[4]-=t}return d}return 4===e.length&&O[4][1].test(e)?((d=[parseInt(e,10),0,1]).isUTC=!0,d):e}(e);if(r!==e)return s(r,r.isUTC||!0===t);var d=y.exec(e);return new Date(null!==d?+d[1]:e)}function U(e,t,n){return e=c(e)?new Date:e.length?C(e,t,n):"number"==typeof e?new Date(e):j(e)?new Date(+e):e._i&&e.isValid()?new Date(+e):new Date}function W(e,t){var n=12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth()),r=d(v(e),n,"months");return-(n+(t-r<0?(t-r)/(r-d(v(e),n-1,"months")):(t-r)/(d(v(e),n+1,"months")-r)))||0}function z(e,t){switch(t=M(t)){case i:e.setMonth(0);case o:e.setDate(1);case f:e.setHours(0);case l:e.setMinutes(0);case g:e.setSeconds(0);case m:e.setMilliseconds(0)}return e}function B(e,t){return(t=M(t))&&t!==h&&(z(e,t),d(e,1,t),d(e,-1,h)),e}function V(e,t){return void 0===t&&(t=2),("000000"+e).slice(-t)}function $(e,t){var n;return e<0?(n="+",e=Math.abs(e)):n="-",""+n+V(Math.floor(e/60))+(t?"":":")+V(Math.floor(e%60))}function L(e){return 12<(e=e||24)?e-12:e}function _(e,t,n,r){if(t=U(t),(n=M(w(n)?h:n))===h)switch(r){case"before":return+e<+t;case"after":return+t<+e;default:return+e==+t}else{var d=+t;switch(r){case"before":return+B(v(e),n)<d;case"after":return+z(v(e),n)>d;default:return+z(v(e),n)<=d&&d<=+B(v(e),n)}}}function q(e,t,n){return _(e,t,n,"after")}function E(e,t,n){return _(e,t,n,"before")}return{add:d,clone:v,dayOfYear:function(e,t){var n=b(e),r=e.getMonth(),d=0;return p(r,function(e){d+=n[e]}),d+=e.getDate(),w(t)?d:(e.setTime(+e+864e5*(t-d)),e)},daysInMonth:function(e){return b(e)[e.getMonth()]},diff:function(e,t,n,r){var d,a;switch(t=U(t),n=M(n)){case i:d=W(e,t)/12;break;case o:d=W(e,t);break;case m:d=(e-t)/1e3;break;case g:d=(e-t)/6e4;break;case l:d=(e-t)/36e5;break;case f:d=(e-t)/864e5;break;default:d=e-t}return r?d:(a=d)<0?Math.ceil(a)||0:Math.floor(a)},endOf:B,format:function(t,e){return e?e.replace(T,function(e){switch(e){case"YY":return String(t.getFullYear()).slice(-2);case"YYYY":case"yyyy":return t.getFullYear();case"M":return t.getMonth()+1;case"MM":return V(t.getMonth()+1);case"D":case"d":return t.getDate();case"DD":case"dd":return V(t.getDate());case"H":return t.getHours();case"HH":return V(t.getHours());case"h":return L(t.getHours());case"hh":return V(L(t.getHours()));case"m":return t.getMinutes();case"mm":return V(t.getMinutes());case"s":return t.getSeconds();case"ss":return V(t.getSeconds());case"SSS":return V(t.getMilliseconds(),3);case"Z":return $(t.getTimezoneOffset());case"ZZ":return $(t.getTimezoneOffset(),!0);default:return e}}):t.toISOString()},isAfter:q,isBefore:E,isBetween:function(e,t,n,r,d){return("("===(d=d||"()").charAt(0)?q(e,t,r):!E(e,t,r))&&(")"===d.charAt(1)?E(e,n,r):!q(e,n,r))},isLeapYear:r,isSame:function(e,t,n){return _(e,t,n)},isSameOrAfter:function(e,t,n){return!E(e,t,n)},isSameOrBefore:function(e,t,n){return!q(e,t,n)},isValid:function(e){return"Invalid Date"!==e.toString()},parse:U,startOf:z,subtract:function(e,t,n){return d(e,-t,n)}}});